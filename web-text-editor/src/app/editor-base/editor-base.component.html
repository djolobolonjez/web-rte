<div class="editor-base-container">
  <!-- Header -->
  <div class="header"></div>

  <!-- Toolbar -->
  <div class="toolbar">
    <!-- Font dropdown -->
    <label for="fontSelect">Font:</label>
    <select id="fontSelect" (change)="changeFont($event)">
      <option value="Arial">Arial</option>
      <option value="Times New Roman">Times New Roman</option>
      <option value="Courier New">Courier New</option>
    </select>

    <!-- Font size controls -->
    <label>Font Size:</label>
    <button (click)="decreaseFontSize()">-</button>
    <span>{{ fontSize }}</span>
    <button (click)="increaseFontSize()">+</button>

    <!-- Bold and Italic buttons -->
    <button (click)="toggleBold()" [class.active]="isBold">Bold</button>
    <button (click)="toggleItalic()" [class.active]="isItalic">Italic</button>

    <!-- Undo and Redo buttons -->
    <button (click)="undo()">Undo</button>
    <button (click)="redo()">Redo</button>

    <!-- Find and Replace button -->
    <button (click)="openFindReplaceModal()">Find and Replace</button>
  </div>

  <!-- Floating toolbar for 'Add Comment' or 'Go to Comment' -->
  <div class="floating-toolbar" *ngIf="showFloatingToolbar" [ngStyle]="{ top: toolbarPosition.top + 'px', left: toolbarPosition.left + 'px' }">
    <button *ngIf="!isExistingComment" (click)="openCommentPopup()">Add Comment</button>
    <button *ngIf="isExistingComment" (click)="goToComment()">Go to Comment</button>
  </div>

  <!-- Editor and comments container -->
  <div class="editor-container">
    <!-- Editable Content -->
    <div class="editor" contenteditable="true" (input)="onInput($event)" (keydown)="onKeyDown($event)">
      <!-- The text content will be editable here -->
    </div>

    <!-- Comments panel (appears only when there are comments) -->
    <div class="comments-panel" *ngIf="commentContainers.length > 0">
      <div *ngFor="let comm of commentContainers; let i = index" class="comment-box" [id]="'comment-' + i">
        <ul class="comment-thread">
          <li *ngFor="let reply of comm.getReplies()">
            <div class="comment-author">{{ reply.getAuthor() }}</div>
            <div class="comment-text">{{ reply.getText() }}</div>
            <div class="comment-date">{{ reply.getLastModified() }}</div>
          </li>
        </ul>
        <input type="text" [(ngModel)]="newReply" placeholder="Add a reply..." class="reply-input">
        <button class="reply-button" (click)="addReply(comm.getID())">Reply</button>
      </div>
    </div>
  </div>

  <!-- Find and Replace Modal -->
  <div class="modal" *ngIf="isModalOpen">
    <div class="modal-content">
      <h2>Find and Replace</h2>

      <!-- Input for Find -->
      <label for="searchTerm">Find:</label>
      <input type="text" id="searchTerm" [(ngModel)]="searchTerm">

      <!-- Input for Replace -->
      <label for="replacement">Replace with:</label>
      <input type="text" id="replacement" [(ngModel)]="replacement">

      <!-- Action Buttons -->
      <div class="button-container">
        <button (click)="findNext()">Find Next</button>
        <button (click)="replace()">Replace</button>
        <button (click)="replaceAll()">Replace All</button>
      </div>

      <button class="close-button" (click)="closeModal()">Close</button>
    </div>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" *ngIf="isCommentPopupOpen">
    <div class="modal-content">
      <h3>Enter Comment</h3>
      <textarea [(ngModel)]="newCommentText" placeholder="Write your comment here..."></textarea>
      <button (click)="saveComment()">Save Comment</button>
      <button (click)="closeCommentPopup()">Cancel</button>
    </div>
  </div>
</div>
